*{box-sizing:border-box}
body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;background:#f6f8ff;color:#0f172a}

.topbar{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;background:#0f172a;color:#fff;position:sticky;top:0;z-index:10}
.brand{font-weight:800;letter-spacing:.2px}
.me{display:flex;align-items:center;gap:10px;font-weight:700}
.ghost{background:transparent;border:1px solid rgba(255,255,255,.35);color:#fff;border-radius:10px;padding:6px 10px;cursor:pointer}
.gender-ico{display:inline-grid;place-items:center;width:22px;height:22px;border-radius:50%;background:#ffd66b;border:1px solid #e8be4a;font-size:12px;color:#1f2937}

.mur-layout.vertical{display:flex;flex-direction:column;gap:16px;padding:16px;max-width:1100px;margin:0 auto}
.char-preview-stage{position:relative;height:340px;width:100%;display:flex;align-items:flex-end;justify-content:center;padding:28px 24px 32px;background:linear-gradient(180deg,#f3f4f8 0%,#edeff3 58%,#d9dce2 59%,#cdd0d8 100%);border-radius:14px;border:1px solid #d0d4dc;box-shadow:inset 0 -18px 0 rgba(255,255,255,.35);overflow:hidden}
.char-preview-stage::before{content:"";position:absolute;left:-24px;right:-24px;bottom:48px;height:26px;background:linear-gradient(180deg,rgba(255,255,255,.65) 0%,rgba(205,209,219,0) 100%);z-index:1;pointer-events:none}
.char-preview-stage::after{content:"";position:absolute;left:0;right:0;bottom:0;height:128px;background:linear-gradient(180deg,rgba(162,168,182,.42) 0%,rgba(146,152,166,.55) 55%,rgba(128,134,148,.72) 100%);border-top:1px solid rgba(108,114,128,.28);box-shadow:inset 0 20px 36px rgba(15,23,42,.16);z-index:0}
.mur-hero{display:flex;flex-wrap:wrap;gap:16px;align-items:flex-start}
.mur-hero .hero-preview{flex:1 1 360px;min-width:280px}
.mur-hero .hero-online{padding:12px 14px;border-radius:14px;background:rgba(255,255,255,.35);backdrop-filter:blur(12px);border:1px solid rgba(192,201,220,.45);font-size:14px;color:#1e293b;display:flex;flex-direction:column;gap:6px;box-shadow:0 18px 36px rgba(15,23,42,.12)}
.hero-preview .hero-online{position:absolute;top:24px;right:24px;width:min(260px,calc(100% - 48px));z-index:2}
.hero-preview .hero-online::before{content:"";position:absolute;inset:0;border-radius:inherit;background:rgba(255,255,255,.08);pointer-events:none}
.hero-preview .hero-online>*{position:relative;z-index:1}
.mur-hero .hero-online b{font-size:15px}
.mur-hero .hero-online .user{display:flex;gap:6px;align-items:center}
.mur-hero .hero-online .dot{width:8px;height:8px;border-radius:50%;background:#22c55e;display:inline-block}
.hero-preview{position:relative}
.hero-preview-controls{display:flex;align-items:flex-end;justify-content:center;gap:12px;width:100%;height:100%}
.hero-preview-controls .character-stage{flex:1 1 auto;height:100%;position:relative;min-height:0}
.hero-preview-controls .hero-move-button{background:rgba(255,255,255,.72);border:1px solid rgba(79,110,230,.35);border-radius:999px;width:44px;height:44px;display:grid;place-items:center;font-size:18px;font-weight:600;color:#1e293b;cursor:pointer;box-shadow:0 10px 18px rgba(15,23,42,.12);transition:transform .12s ease,box-shadow .12s ease,background-color .12s ease,color .12s ease}
.hero-preview-controls .hero-move-button:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 14px 26px rgba(15,23,42,.16);background:rgba(255,255,255,.9)}
.hero-preview-controls .hero-move-button:active:not(:disabled),
.hero-preview-controls .hero-move-button[aria-pressed="true"]:not(:disabled){transform:translateY(1px);box-shadow:0 6px 12px rgba(15,23,42,.1)}
.hero-preview-controls .hero-move-button:focus-visible{outline:3px solid rgba(79,110,230,.55);outline-offset:2px}
.hero-preview-controls .hero-move-button:disabled{opacity:.45;cursor:not-allowed;transform:none;box-shadow:none}
.hero-preview-controls .hero-move-button[hidden]{display:none}
.hero-preview .character-stage{position:relative;z-index:2}
.hero-preview .character-bubble{position:absolute;bottom:calc(100% + 18px);left:50%;transform:translateX(-50%);background:rgba(255,255,255,.88);padding:6px 10px;border-radius:12px;box-shadow:0 8px 18px rgba(15,23,42,.16);font-size:14px;line-height:1.3;color:#0f172a;max-width:220px;white-space:pre-wrap;text-align:center;pointer-events:none;z-index:1}
.hero-preview .character-bubble[hidden]{display:none}

@media (max-width:640px){.char-preview-stage.hero-preview{padding-top:140px;padding-right:160px}.hero-preview .hero-online{top:16px;right:16px;width:min(180px,calc(100% - 32px))}}

#location-character{--translate-x:0px;--scale:.75;transform-origin:50% 100%;transform:translate3d(var(--translate-x),0,0) translateX(-50%) scale(var(--scale))}

.mur-chat.wide{width:100%}
.mur-chat h3{margin:6px 0 10px}
.chat-log{overflow:auto;padding:10px;background:rgba(255,255,255,.45);backdrop-filter:blur(8px);border-radius:12px;border:none;height:240px}
.chat-input{display:flex;gap:8px;align-items:center;margin-top:8px;background:rgba(255,255,255,.45);border-radius:12px;padding:8px 10px;backdrop-filter:blur(8px)}
.chat-input.borderless{border:none}
.chat-input input{flex:1;background:transparent;border:0;outline:none}
.chat-input button{border:1px solid #dfe6f2;background:#e6eefc;border-radius:10px;padding:8px 12px;cursor:pointer}

.modal{position:fixed;inset:0;background:rgba(0,0,0,.32);display:grid;place-items:center;z-index:50}
.modal[hidden]{display:none}
.modal-box{width:min(980px,94vw);max-height:88vh;overflow:auto;background:#ffffff;border:1px solid #e4e9f8;border-radius:16px;box-shadow:0 10px 50px rgba(0,0,0,.15);padding:16px;display:flex;flex-direction:column}
.modal-box.shop-box{overflow:hidden;display:flex;flex-direction:column;gap:16px}
.modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;gap:12px}
.modal .title{font-size:18px;font-weight:800}

.char-grid{display:grid;grid-template-columns:320px 1fr;gap:16px;flex:1}
.char-preview{background:#f7f9ff;border:1px solid #e2e9fb;border-radius:14px;padding:16px;display:flex;flex-direction:column;gap:14px}
.char-header{display:flex;flex-direction:column;gap:12px}
.coins-line{display:flex;gap:10px;align-items:center;margin:8px 0}
.countdown{color:#334155;font-weight:700}
.emotion-control{margin:12px 0}
.equipped{display:flex;flex-wrap:wrap;gap:10px}
.equip-pill{border:1px dashed #aac3ff;background:#eef4ff;border-radius:999px;padding:8px 14px;font-size:14px;cursor:pointer;display:inline-flex;align-items:center;gap:6px;min-height:40px}
.char-inventory{display:flex;flex-direction:column;gap:12px;min-height:0}
.inventory-scroll{display:flex;flex-direction:column;gap:16px;flex:1;min-height:0}
.char-inventory .slot-bar{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:14px;margin:12px 0 4px}
.slot{background:#fff;border:2px dashed #c7d2fe;border-radius:12px;padding:14px;cursor:pointer;text-align:center;min-height:72px;display:flex;align-items:center;justify-content:center}
.slot.active{border-style:solid;background:#eef4ff}
.inventory-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:14px}
.modal-box.shop-box .coins-line{margin:0}
#shop{flex:1;min-height:0;overflow-y:auto;-webkit-overflow-scrolling:touch;padding:4px 4px 16px}
.shop-categories{display:flex;gap:10px;margin-bottom:16px;overflow-x:auto;padding-bottom:6px;scrollbar-width:none;-ms-overflow-style:none}
.shop-categories::-webkit-scrollbar{display:none}
.shop-category{flex:0 0 auto;padding:8px 16px;border-radius:999px;border:1px solid #d5def6;background:#f5f7ff;color:#1e293b;cursor:pointer;font-weight:600;transition:transform .12s ease,box-shadow .12s ease,border-color .12s ease,background .12s ease,color .12s ease}
.shop-category:hover{transform:translateY(-1px);box-shadow:0 10px 20px rgba(79,110,230,.18);border-color:#b7c4f4}
.shop-category:focus-visible{outline:3px solid #4f6ee6;outline-offset:2px}
.shop-category.active{background:#4f6ee6;color:#fff;border-color:#4f6ee6;box-shadow:0 12px 24px rgba(79,110,230,.28)}
.shop-empty{padding:24px;border-radius:14px;border:1px dashed #d5def6;background:#f8faff;color:#475569;text-align:center}
.item{--item-accent:#6366f1;--item-accent-soft:#eef2ff;display:flex;align-items:center;gap:12px;position:relative;padding:14px;border-radius:14px;border:1px solid rgba(15,23,42,.08);background:linear-gradient(140deg,var(--item-accent-soft),#ffffff);cursor:pointer;transition:transform .12s ease,box-shadow .12s ease,border-color .12s ease}
.item:hover,.item:focus-visible{transform:translateY(-1px);box-shadow:0 10px 22px rgba(15,23,42,.12);border-color:var(--item-accent)}
.item:focus-visible{outline:3px solid var(--item-accent);outline-offset:2px;box-shadow:0 12px 26px rgba(15,23,42,.16)}
.item-icon{width:44px;height:44px;border-radius:12px;background:var(--item-accent-soft);color:var(--item-accent);display:grid;place-items:center;font-size:24px;flex-shrink:0}
.item-info{display:flex;flex-direction:column;gap:4px;min-width:0}
.item-name{font-weight:600;color:#0f172a;font-size:15px;line-height:1.2;word-break:break-word}
.item-meta{display:flex;flex-wrap:wrap;gap:6px;font-size:13px;color:#475569}
.item-meta span{padding:4px 8px;border-radius:999px;background:var(--item-accent-soft);color:var(--item-accent);font-weight:500}
.item.equipped{box-shadow:0 0 0 2px var(--item-accent)}

/* Auth improved + creator */
.auth-body{display:grid;place-items:center;min-height:100vh;background:radial-gradient(70% 70% at 50% 30%,#253157 0%,#11162a 60%,#0a0d1c 100%)}
.auth-card.modern{background:rgba(255,255,255,.08);color:#fff;padding:26px 20px;border-radius:16px;border:1px solid rgba(255,255,255,.2);width:min(760px,96vw);backdrop-filter:blur(10px)}
.auth-card.modern.big .logo{font-size:48px;line-height:1;margin-bottom:10px}
.auth-card h1{margin:6px 0 6px}
.auth-card .muted{margin:0 0 14px;color:#dbe6ffb3}
.auth-card .row{margin:10px 0}
.auth-card input, .auth-card select{width:100%;padding:12px 12px;border-radius:12px;border:1px solid rgba(255,255,255,.35);background:rgba(255,255,255,.12);color:#fff}
.gender-select-row .select-wrap{position:relative}
.pill-select{appearance:none;-webkit-appearance:none;-moz-appearance:none;padding-right:44px;border-radius:999px;background-color:rgba(255,255,255,.12);background-image:url("data:image/svg+xml,%3Csvg width='12' height='8' viewBox='0 0 12 8' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1.5L6 6.5L11 1.5' stroke='white' stroke-width='1.5' stroke-linecap='round'/%3E%3C/svg%3E"),linear-gradient(135deg,rgba(106,162,255,.32),rgba(91,140,255,.14));background-repeat:no-repeat,no-repeat;background-position:right 14px center,center;background-size:12px auto,100% 100%;box-shadow:0 0 0 1px rgba(106,162,255,.18) inset}
.pill-select option{color:#0f172a;background:#fff}
.pill-select:focus{outline:2px solid rgba(106,162,255,.6);outline-offset:2px}
.gender-select-row .small-muted{margin-left:auto}
.auth-card .actions{display:flex;gap:10px;margin-top:8px}
.auth-card button{flex:1;border:1px solid rgba(255,255,255,.45);background:#5b8cff;color:#fff;padding:12px;border-radius:12px;font-weight:700;cursor:pointer}
.auth-card button.primary{background:#6aa2ff}
.auth-card button.secondary{background:#0f3460}
.gender-row.auth{display:flex;gap:12px;color:#eaeef9;font-size:14px;align-items:center}
.lbl{display:block;margin-bottom:6px;opacity:.9}
.hint{font-size:12px;color:#ffd2d2;height:14px}
.error{color:#ffd2d2;margin-top:10px}
.tabs{display:flex;gap:8px;margin-bottom:10px}
.tabs .tab{flex:1;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,.25);background:rgba(255,255,255,.08);color:#fff;cursor:pointer}
.tabs .tab.active{background:#5b8cff}
.panel{display:none}
.panel.active{display:block}
.pw-wrap{position:relative;display:flex;align-items:center}
.pw-wrap input{padding-right:40px}
.pw-eye{position:absolute;right:6px;top:50%;transform:translateY(-50%);background:transparent;border:0;color:#fff;cursor:pointer}

.creator{display:grid;grid-template-columns:1fr 260px;gap:16px}
.creator-right{display:flex;flex-direction:column;align-items:center;gap:12px;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.2);border-radius:12px;padding:12px}
.preview-header{align-self:stretch;display:flex;justify-content:flex-end;margin:0}
.preview-emotion{display:inline-flex;align-items:center;gap:6px;padding:6px 12px;border-radius:999px;background:rgba(255,255,255,.12);border:1px solid rgba(255,255,255,.25);color:#fff;font-size:13px;font-weight:600;min-height:0}
.character-stage{--character-ground-offset:56px;width:100%;height:100%;min-height:calc(260px + var(--character-ground-offset,56px));position:relative;padding:0;z-index:2}
.character-stage::before{content:"";position:absolute;left:10%;right:10%;bottom:calc(var(--character-ground-offset,56px) - 4px);height:24px;border-radius:999px;background:linear-gradient(180deg,rgba(124,130,140,.6) 0%,rgba(96,102,114,.72) 100%);box-shadow:0 20px 36px rgba(15,23,42,.18);z-index:0;pointer-events:none}
.character{--skin:#f1c7a3;--skin-highlight:#f8dcc1;--skin-shadow:#d19a6c;--hair:#1f2937;--eyes:#274472;--eye-white:#fff;--eye-highlight:#f5f9ff;--eye-shadow:#13294b;--brow-color:var(--hair);--brow-highlight:rgba(255,255,255,.12);--lid-color:rgba(255,255,255,.25);--lid-shadow:rgba(0,0,0,.18);--cheek-blush:rgba(255,154,174,.3);--mouth-color:#d45a60;--mouth-soft:rgba(255,244,244,.65);--underwear:#6aa2ff;position:absolute;bottom:var(--character-ground-offset,56px);left:50%;width:220px;height:260px;display:flex;align-items:flex-end;justify-content:center;pointer-events:none;transform:translateX(-50%);transition:transform .25s ease;z-index:1}
.character-name-tag{position:absolute;bottom:calc(100% + 12px);left:50%;transform:translateX(-50%);padding:6px 14px;border-radius:999px;background:rgba(15,23,42,.88);color:#fff;font-size:14px;font-weight:600;line-height:1;white-space:nowrap;pointer-events:none;box-shadow:0 6px 18px rgba(15,23,42,.26);text-transform:none;letter-spacing:.01em}
.character-shadow{position:absolute;bottom:-4px;left:50%;transform:translateX(-50%);width:140px;height:26px;background:radial-gradient(circle at 50% 50%,rgba(72,76,88,.45),rgba(72,76,88,0));opacity:.5;border-radius:50%}
.character-inner{position:relative;width:160px;height:220px;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;z-index:1}
.character-head{position:relative;width:124px;height:128px;display:flex;align-items:center;justify-content:center}
.character-face{position:relative;width:112px;height:116px;background:var(--skin);border-radius:58% 56% 50% 52%;box-shadow:inset 0 -8px 0 rgba(0,0,0,.05);display:flex;flex-direction:column;align-items:center;justify-content:center;padding-top:26px;z-index:2;overflow:visible;isolation:isolate}
.character-eyebrows{position:absolute;top:30px;left:50%;width:90px;display:flex;justify-content:space-between;gap:10px;transform:translateX(-50%);transition:top .3s ease,transform .3s ease;z-index:4}
.character-eyebrow{width:32px;height:8px;background:var(--brow-color);border-radius:999px;box-shadow:0 1px 0 var(--brow-highlight) inset;transition:transform .3s ease,top .3s ease,width .3s ease,height .3s ease,opacity .3s ease}
.character-eyes{position:absolute;top:60px;left:50%;width:100px;display:flex;justify-content:space-between;transform:translateX(-50%);z-index:2;pointer-events:none}
.character-eye{position:relative;width:32px;height:24px;border-radius:46% 46% 48% 48%;background:var(--eye-white);border:1.8px solid var(--skin-shadow);box-shadow:0 3px 0 rgba(15,23,42,.08) inset,0 2px 6px rgba(15,23,42,.16);overflow:hidden;display:flex;align-items:center;justify-content:center;transition:transform .35s ease,width .35s ease,height .35s ease,border-radius .35s ease,box-shadow .3s ease}
.eye-iris{position:absolute;top:50%;left:50%;width:62%;height:62%;transform:translate(-50%,-50%) scale(1);border-radius:50%;background:radial-gradient(circle at 28% 28%,rgba(255,255,255,.4) 0 34%,rgba(255,255,255,0) 35%),radial-gradient(circle at 50% 40%,rgba(0,0,0,.18) 0 68%,rgba(0,0,0,.32) 69% 100%),var(--eyes);box-shadow:0 0 0 2px rgba(255,255,255,.35) inset,0 0 8px rgba(15,23,42,.28);transition:transform .35s ease,width .35s ease,height .35s ease}
.eye-pupil{display:block;position:absolute;top:50%;left:50%;width:48%;height:48%;transform:translate(-50%,-50%) scale(1);border-radius:50%;background:var(--eye-shadow);box-shadow:0 0 0 1px rgba(0,0,0,.35),0 0 8px rgba(0,0,0,.3);transition:transform .35s ease,width .35s ease,height .35s ease}
.eye-highlight{position:absolute;width:28%;height:28%;top:26%;left:32%;border-radius:50%;background:var(--eye-highlight);box-shadow:0 0 6px rgba(255,255,255,.6);opacity:.9;transform:translate(0,0) scale(1);transition:transform .35s ease,opacity .35s ease}
.character-eyelids{position:absolute;top:58px;left:50%;width:100px;display:flex;justify-content:space-between;transform:translateX(-50%);pointer-events:none;z-index:3}
.character-eyelid{width:34px;height:16px;border-radius:48% 48% 38% 38%;background:var(--lid-color);box-shadow:0 2px 0 var(--lid-shadow) inset;opacity:0;transform-origin:center;transition:opacity .35s ease,transform .35s ease,height .35s ease}
.character-eyelid.upper{transform:translateY(-24px)}
.character-eyelid.lower{transform:translateY(14px);height:14px;border-radius:40% 40% 58% 58%;box-shadow:0 -1px 0 var(--lid-shadow) inset}
.character-cheeks{position:absolute;top:92px;left:50%;width:124px;display:flex;justify-content:space-between;transform:translateX(-50%);pointer-events:none;z-index:1}
.character-cheek{width:34px;height:18px;border-radius:50%;background:var(--cheek-blush);filter:blur(.4px);opacity:.18;transition:opacity .35s ease,transform .35s ease}
.character-mouth{position:absolute;left:50%;bottom:32px;width:48px;height:26px;border-radius:28px;background:transparent;border:4px solid var(--mouth-color);border-top-color:transparent;border-left-color:transparent;border-right-color:transparent;transform:translateX(-50%);transition:all .35s ease;display:flex;align-items:center;justify-content:center;overflow:hidden;z-index:3}
.character-mouth .mouth-inner{position:absolute;inset:48% 10% 2px;border-radius:40px;background:var(--mouth-color);opacity:.08;transition:all .35s ease}
.character-mouth .mouth-highlight{position:absolute;bottom:6px;left:50%;transform:translateX(-50%);width:70%;height:36%;border-radius:50%;background:var(--mouth-soft);opacity:0;transition:opacity .35s ease,transform .35s ease}
.character[data-emotion="neutral"] .character-eyebrows{top:32px}
.character[data-emotion="neutral"] .character-eye{transform:translateY(0)}
.character[data-emotion="neutral"] .eye-iris{transform:translate(-50%,-46%) scale(.94)}
.character[data-emotion="neutral"] .eye-pupil{transform:translate(-50%,-38%) scale(.78)}
.character[data-emotion="neutral"] .eye-highlight{transform:translate(-18%,-20%) scale(.88)}
.character[data-emotion="neutral"] .character-eyelid.upper{opacity:.55;transform:translateY(-12px)}
.character[data-emotion="neutral"] .character-eyelid.lower{opacity:.32;transform:translateY(8px)}
.character[data-emotion="neutral"] .character-cheek{opacity:.28}
.character[data-emotion="neutral"] .character-mouth{height:26px;border-bottom-width:5px;border-top-width:2px;border-top-color:rgba(255,255,255,.25);border-bottom-color:var(--mouth-color);border-radius:42px/24px}
.character[data-emotion="neutral"] .character-mouth .mouth-inner{inset:50% 14% 4px;opacity:.12}
.character[data-emotion="neutral"] .character-mouth .mouth-highlight{opacity:.35}
.character[data-emotion="smile"] .character-eyebrows{top:26px}
.character[data-emotion="smile"] .character-eyebrow.left{transform:translateY(-4px) rotate(-10deg)}
.character[data-emotion="smile"] .character-eyebrow.right{transform:translateY(-4px) rotate(10deg)}
.character[data-emotion="smile"] .character-eye{height:20px;border-radius:52% 52% 60% 60%;transform:translateY(2px)}
.character[data-emotion="smile"] .eye-iris{transform:translate(-50%,-46%) scale(.86)}
.character[data-emotion="smile"] .eye-pupil{transform:translate(-50%,-36%) scale(.68)}
.character[data-emotion="smile"] .eye-highlight{transform:translate(-26%,-38%) scale(.82)}
.character[data-emotion="smile"] .character-eyelid.upper{opacity:.92;transform:translateY(-6px)}
.character[data-emotion="smile"] .character-eyelid.lower{opacity:.45;transform:translateY(4px)}
.character[data-emotion="smile"] .character-cheek{opacity:.48;transform:translateY(2px) scale(1.08)}
.character[data-emotion="smile"] .character-mouth{width:54px;height:32px;border-bottom-width:6px;border-top-width:1px;border-top-color:transparent;border-bottom-color:var(--mouth-color);border-radius:999px;transform:translate(-50%,-2px)}
.character[data-emotion="smile"] .character-mouth .mouth-inner{inset:58% 10% 4px;opacity:.18}
.character[data-emotion="smile"] .character-mouth .mouth-highlight{opacity:.55;transform:translate(-50%,4px) scale(1.05,.9)}
.character[data-emotion="frown"] .character-eyebrows{top:36px}
.character[data-emotion="frown"] .character-eyebrow.left{transform:translateY(4px) rotate(12deg)}
.character[data-emotion="frown"] .character-eyebrow.right{transform:translateY(4px) rotate(-12deg)}
.character[data-emotion="frown"] .character-eye{height:22px;border-radius:48% 48% 46% 46%;transform:translateY(2px)}
.character[data-emotion="frown"] .eye-iris{transform:translate(-50%,-32%) scale(.82)}
.character[data-emotion="frown"] .eye-pupil{transform:translate(-50%,-24%) scale(.66)}
.character[data-emotion="frown"] .eye-highlight{transform:translate(-20%,-6%) scale(.72);opacity:.78}
.character[data-emotion="frown"] .character-eyelid.upper{opacity:.82;transform:translateY(-4px)}
.character[data-emotion="frown"] .character-eyelid.lower{opacity:.35;transform:translateY(10px)}
.character[data-emotion="frown"] .character-cheek{opacity:.2;transform:translateY(4px)}
.character[data-emotion="frown"] .character-mouth{height:20px;border-top-width:6px;border-bottom-width:0;border-top-color:var(--mouth-color);border-bottom-color:transparent;border-radius:46px/24px;transform:translate(-50%,-6px)}
.character[data-emotion="frown"] .character-mouth .mouth-inner{inset:42% 18% 2px;opacity:.16}
.character[data-emotion="frown"] .character-mouth .mouth-highlight{opacity:.22;transform:translate(-50%,4px) scale(.78)}
.character[data-emotion="surprised"] .character-eyebrows{top:20px}
.character[data-emotion="surprised"] .character-eyebrow{width:28px;height:6px;opacity:.75}
.character[data-emotion="surprised"] .character-eye{width:34px;height:30px;border-radius:48%;box-shadow:0 4px 0 rgba(15,23,42,.12) inset,0 4px 10px rgba(15,23,42,.2)}
.character[data-emotion="surprised"] .eye-iris{transform:translate(-50%,-52%) scale(.9)}
.character[data-emotion="surprised"] .eye-pupil{transform:translate(-50%,-44%) scale(.7)}
.character[data-emotion="surprised"] .eye-highlight{transform:translate(-28%,-34%) scale(1.05);opacity:.95}
.character[data-emotion="surprised"] .character-eyelid.upper{opacity:.4;transform:translateY(-18px)}
.character[data-emotion="surprised"] .character-eyelid.lower{opacity:.3;transform:translateY(14px)}
.character[data-emotion="surprised"] .character-cheek{opacity:.24;transform:translateY(-2px) scale(1.02)}
.character[data-emotion="surprised"] .character-mouth{width:28px;height:30px;border-width:5px;border-color:var(--mouth-color);border-radius:50%;bottom:36px;transform:translate(-50%,0)}
.character[data-emotion="surprised"] .character-mouth .mouth-inner{inset:10px 6px 6px;opacity:.42;border-radius:50%}
.character[data-emotion="surprised"] .character-mouth .mouth-highlight{opacity:.6;transform:translate(-50%,6px) scale(.9)}
.character[data-emotion="sleepy"] .character-eyebrows{top:38px}
.character[data-emotion="sleepy"] .character-eyebrow{height:6px;opacity:.7}
.character[data-emotion="sleepy"] .character-eye{height:16px;border-radius:60% 60% 70% 70%;transform:translateY(4px)}
.character[data-emotion="sleepy"] .eye-iris{transform:translate(-50%,-20%) scale(.7)}
.character[data-emotion="sleepy"] .eye-pupil{transform:translate(-50%,-12%) scale(.6)}
.character[data-emotion="sleepy"] .eye-highlight{transform:translate(-12%,-4%) scale(.55);opacity:.55}
.character[data-emotion="sleepy"] .character-eyelid.upper{opacity:.95;transform:translateY(-4px)}
.character[data-emotion="sleepy"] .character-eyelid.lower{opacity:.7;transform:translateY(4px)}
.character[data-emotion="sleepy"] .character-cheek{opacity:.34;transform:translateY(4px) scale(.96)}
.character[data-emotion="sleepy"] .character-mouth{width:42px;height:14px;border-width:4px 0 0 0;border-top-color:var(--mouth-color);border-bottom-width:0;border-radius:999px;bottom:34px;transform:translate(-50%,4px)}
.character[data-emotion="sleepy"] .character-mouth .mouth-inner{opacity:0}
.character[data-emotion="sleepy"] .character-mouth .mouth-highlight{opacity:0}
.character-mouth{position:absolute;left:50%;bottom:28px;width:48px;height:28px;border-radius:28px;background:transparent;border:4px solid var(--mouth-color);border-top-color:transparent;border-left-color:transparent;border-right-color:transparent;transform:translateX(-50%);transition:all .2s ease}
.character-hair-back,.character-hair{position:absolute;left:50%;background:var(--hair);transform:translateX(-50%);transition:all .25s ease}
.character-hair-back{top:10px;width:142px;height:140px;border-radius:56% 56% 44% 44%;z-index:0;box-shadow:0 6px 14px rgba(15,23,42,.25)}
.character-hair{top:-8px;width:134px;height:96px;border-radius:60% 60% 42% 42%;z-index:3;box-shadow:0 6px 12px rgba(15,23,42,.18)}
.character-hair::before{content:"";position:absolute;top:6px;left:50%;transform:translateX(-50%);width:120px;height:64px;background:radial-gradient(circle at 50% 10%,rgba(255,255,255,.18) 0 24%,transparent 25%),var(--hair);border-radius:60% 60% 40% 40%;opacity:.95}
.character-hair::after{content:"";position:absolute;bottom:-16px;left:50%;transform:translateX(-50%);width:94px;height:36px;background:var(--hair);border-radius:48% 52% 70% 70%;box-shadow:0 8px 12px rgba(15,23,42,.18)}
.character-body{position:relative;width:130px;height:140px;margin-top:-10px;display:flex;align-items:flex-start;justify-content:center}
.character-torso{position:relative;width:96px;height:92px;background:var(--skin);border-radius:48px 48px 34px 34px;box-shadow:inset 0 -8px 0 rgba(0,0,0,.05);display:flex;align-items:flex-end;justify-content:center;z-index:1}
.character-underwear{position:absolute;left:50%;bottom:-2px;transform:translateX(-50%);width:94px;height:42px;background:var(--underwear);border-radius:40px 40px 24px 24px;box-shadow:inset 0 -10px 0 rgba(0,0,0,.08)}
.character-arm{position:absolute;top:18px;width:34px;height:100px;background:var(--skin);border-radius:999px;box-shadow:inset 0 -8px 0 rgba(0,0,0,.05);z-index:0}
.character-arm.left{left:-12px;transform:rotate(12deg)}
.character-arm.right{right:-12px;transform:rotate(-12deg)}
.character-leg{position:absolute;bottom:-70px;width:38px;height:96px;background:var(--skin);border-radius:999px;box-shadow:inset 0 -12px 0 rgba(0,0,0,.05);z-index:0}
.character-leg.left{left:22px}
.character-leg.right{right:22px}
.character.male .character-torso{width:100px;height:96px;border-radius:52px 52px 34px 34px}
.character.male .character-arm{width:36px;height:106px}
.character.female .character-torso{width:92px;height:90px;border-radius:50px 50px 40px 40px}
.character.female .character-underwear{width:88px;border-radius:38px 38px 30px 30px}
.character.female .character-arm{width:30px;height:96px}
.character.female .character-leg{width:34px}
.character.other .character-torso{width:96px}
.character.other .character-underwear{width:92px}
.character[data-style="short"] .character-hair{height:74px;border-radius:58% 58% 46% 46%}
.character[data-style="short"] .character-hair::after{height:28px;border-radius:52% 48% 70% 70%}
.character[data-style="fade"] .character-hair{height:78px;border-radius:58% 58% 36% 36%;box-shadow:0 4px 10px rgba(15,23,42,.16);background:linear-gradient(180deg,var(--hair) 0%,var(--hair) 58%,rgba(0,0,0,.45) 100%)}
.character[data-style="fade"] .character-hair::after{height:22px}
.character[data-style="buzz"] .character-hair{height:54px;border-radius:70px;box-shadow:none}
.character[data-style="buzz"] .character-hair::before{width:118px;height:48px;border-radius:70px;opacity:.9}
.character[data-style="buzz"] .character-hair::after{display:none}
.character[data-style="undercut"] .character-hair{height:88px;border-radius:58% 58% 30% 30%}
.character[data-style="undercut"] .character-hair::after{height:26px;border-radius:44% 56% 76% 76%;width:110px}
.character[data-style="mohawk"] .character-hair{width:60px;height:110px;border-radius:50px;background:linear-gradient(90deg,transparent 0%,var(--hair) 30%,var(--hair) 70%,transparent 100%);box-shadow:none}
.character[data-style="mohawk"] .character-hair::before{display:none}
.character[data-style="mohawk"] .character-hair::after{display:none}
.character[data-style="mohawk"] .character-hair-back{width:78px;height:150px;border-radius:50px;background:linear-gradient(90deg,transparent 0%,var(--hair) 40%,var(--hair) 60%,transparent 100%)}
.character[data-style="curly"] .character-hair,.character[data-style="curly"] .character-hair-back{background:radial-gradient(circle at 12% 20%,rgba(255,255,255,.18) 0 12%,transparent 13%),radial-gradient(circle at 80% 25%,rgba(255,255,255,.12) 0 14%,transparent 15%),radial-gradient(circle at 40% 60%,rgba(255,255,255,.1) 0 16%,transparent 17%),var(--hair)}
.character[data-style="curly"] .character-hair{height:108px;border-radius:60% 60% 46% 56%}
.character[data-style="curly"] .character-hair::after{height:38px;border-radius:60% 60% 80% 80%}
.character[data-style="afro"] .character-hair-back{top:-6px;width:168px;height:176px;border-radius:50%;box-shadow:0 10px 18px rgba(15,23,42,.24)}
.character[data-style="afro"] .character-hair{display:none}
.character[data-style="ponytail"] .character-hair::after{content:"";width:42px;height:80px;bottom:-58px;border-radius:40px;background:var(--hair);box-shadow:0 10px 18px rgba(15,23,42,.2)}
.character[data-style="ponytail"] .character-hair::before{width:120px;height:70px}
.character[data-style="ponytail"] .character-hair{height:96px;border-radius:60% 60% 40% 40%}
.character.male[data-style="ponytail"] .character-hair::after{left:65%}
.character.female[data-style="ponytail"] .character-hair::after{left:72%;height:92px}
.character.other[data-style="ponytail"] .character-hair::after{left:68%}
.character[data-style="pixie"] .character-hair{height:84px;border-radius:60% 60% 46% 36%}
.character[data-style="pixie"] .character-hair::after{width:108px;height:32px;border-radius:36% 64% 78% 78%;left:46%}
.character[data-style="bob"] .character-hair{height:116px;border-radius:60% 60% 60% 60%;width:150px}
.character.female[data-style="bob"] .character-hair{width:164px;height:128px}
.character.other[data-style="bob"] .character-hair{width:158px;height:122px}
.character[data-style="bob"] .character-hair::after{display:none}
.character[data-style="long"] .character-hair-back{height:196px;top:-6px;border-radius:60% 60% 50% 50%}
.character[data-style="long"] .character-hair{height:128px;width:152px;border-radius:58% 58% 64% 64%}
.character.female[data-style="long"] .character-hair-back{height:216px}
.character.female[data-style="long"] .character-hair{width:164px}
.character.other[data-style="long"] .character-hair{width:158px}
.character[data-style="bun"] .character-hair::after{content:"";width:70px;height:70px;bottom:68px;left:50%;transform:translate(-50%,0);border-radius:50%;background:var(--hair);box-shadow:0 8px 14px rgba(15,23,42,.18)}
.character[data-style="bun"] .character-hair::before{width:122px;height:72px}
.character[data-style="bun"] .character-hair{height:90px;border-radius:58% 58% 42% 42%}
.character[data-style="braids"] .character-hair::before{content:"";top:6px;left:50%;transform:translateX(-50%);width:128px;height:88px;background:radial-gradient(circle at 28% 24%,rgba(255,255,255,.18) 0 18%,transparent 19%),radial-gradient(circle at 72% 26%,rgba(255,255,255,.12) 0 20%,transparent 21%),var(--hair);border-radius:60% 60% 46% 46%}
.character[data-style="braids"] .character-hair::after{content:"";position:absolute;left:60%;width:34px;height:124px;bottom:-76px;border-radius:22px;background:linear-gradient(180deg,var(--hair) 0%,rgba(0,0,0,.25) 100%);box-shadow:0 8px 16px rgba(15,23,42,.2),inset 0 -6px 0 rgba(255,255,255,.08)}
.character.male[data-style="braids"] .character-hair::after{left:56%}
.character.female[data-style="braids"] .character-hair::after{left:64%;width:38px;height:128px}
.character.other[data-style="braids"] .character-hair::after{left:60%}
.character[data-style="braids"] .character-hair-back{width:150px;height:168px;border-radius:58% 58% 50% 50%}
.small{font-size:12px}
.grid2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.grid3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px}

@media (max-width: 640px){
  .modal-box{width:100vw;height:100vh;max-height:100vh;border-radius:0;padding:20px 16px 16px;display:flex;flex-direction:column;overflow:hidden}
  .modal-box.shop-box{gap:12px;padding:20px 14px 16px}
  .modal-header{margin-bottom:12px}
  .char-grid{flex:1;display:flex;flex-direction:column;gap:16px;overflow:hidden}
  .char-preview{height:360px;flex:0 0 auto;overflow:auto}
  .char-inventory{flex:1;min-height:0;overflow:hidden}
  .inventory-scroll{flex:1;min-height:0;overflow-y:auto;padding-right:4px}
  .char-inventory .slot-bar{grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:16px}
  .inventory-grid{grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:16px;padding-bottom:8px}
  #shop{padding:0 2px 16px}
  .slot{min-height:80px}
  .item{min-height:80px}
  .equip-pill{padding:10px 16px;font-size:15px}
  .creator{grid-template-columns:1fr}
  .grid2{grid-template-columns:1fr;row-gap:12px}
  .shop-categories{margin-bottom:12px;gap:8px;padding-bottom:4px}
  .shop-category{padding:8px 14px;font-size:14px}
}

/* --- Creator swatches --- */
.swatch-row{display:flex;flex-wrap:wrap;gap:8px;margin-top:6px}
.swatch{width:34px;height:34px;border-radius:10px;border:2px solid rgba(255,255,255,.35);cursor:pointer;display:inline-block}
.swatch[data-selected="1"]{outline:3px solid #6aa2ff;outline-offset:2px}
.swatch.hair,.swatch.eyes{border-color:rgba(0,0,0,.25)}
.swatch.eyes{width:28px;height:28px;border-radius:999px;border-width:2px}
.emotion-control .pill-select{margin-top:6px;width:100%;padding:10px 14px;border-radius:12px;border:1px solid #d6def3;background:#f4f7ff url("data:image/svg+xml,%3Csvg width='12' height='8' viewBox='0 0 12 8' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1.5L6 6.5L11 1.5' stroke='%234f6ee6' stroke-width='1.5' stroke-linecap='round'/%3E%3C/svg%3E") no-repeat right 14px center;background-size:12px auto;color:#1e293b;font-weight:600}
.emotion-control .pill-select:focus{outline:2px solid rgba(79,110,230,.4);outline-offset:2px}
.hint-row{display:flex;justify-content:space-between;gap:8px;align-items:center}
.small-muted{font-size:12px;opacity:.85}
.select-inline{display:flex;gap:8px;flex-wrap:wrap}
.badge{background:rgba(255,255,255,.12);border:1px solid rgba(255,255,255,.25);border-radius:999px;padding:6px 10px;cursor:pointer}
.badge[data-selected="1"]{background:#5b8cff;border-color:#5b8cff}
